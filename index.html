import React, { useState } from 'react';
import { Calculator, TrendingUp, Banknote } from 'lucide-react';

export default function DepositCalculator() {
  const [deposit, setDeposit] = useState('');
  
  const depositAmount = parseFloat(deposit) || 0;
  
  // Bank rates (5-6% p.a.)
  const bankRateLow = 5;
  const bankRateHigh = 6;
  
  // Your investment rates (assuming higher returns - adjust as needed)
  const investmentRate = 12; // 12% p.a. example
  
  const calculateReturns = (principal, rate, months) => {
    const monthlyRate = rate / 100 / 12;
    return principal * Math.pow(1 + monthlyRate, months) - principal;
  };
  
  const formatCurrency = (amount) => {
    return new Intl.NumberFormat('en-ZA', {
      style: 'currency',
      currency: 'ZAR',
      minimumFractionDigits: 2
    }).format(amount);
  };
  
  const periods = [
    { months: 1, label: '1 Month' },
    { months: 3, label: '3 Months' },
    { months: 6, label: '6 Months' },
    { months: 12, label: '12 Months' }
  ];

  return (
    <div className="max-w-4xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
      <div className="bg-white rounded-lg shadow-xl p-8">
        <div className="text-center mb-8">
          <div className="flex justify-center mb-4">
            <Calculator className="w-12 h-12 text-blue-600" />
          </div>
          <h1 className="text-3xl font-bold text-gray-800 mb-2">Deposit Calculator</h1>
          <p className="text-gray-600">Compare your investment returns with bank rates</p>
        </div>

        {/* Input Section */}
        <div className="mb-8">
          <label className="block text-lg font-semibold text-gray-700 mb-3">
            Deposit Amount (ZAR)
          </label>
          <div className="relative">
            <Banknote className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
            <input
              type="number"
              value={deposit}
              onChange={(e) => setDeposit(e.target.value)}
              placeholder="Enter amount in Rand"
              className="w-full pl-12 pr-4 py-4 text-xl border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
            />
          </div>
        </div>

        {depositAmount > 0 && (
          <div className="space-y-6">
            {/* Results Header */}
            <div className="text-center">
              <h2 className="text-2xl font-bold text-gray-800 mb-2">
                Returns on {formatCurrency(depositAmount)}
              </h2>
            </div>

            {/* Comparison Table */}
            <div className="overflow-x-auto">
              <table className="w-full border-collapse bg-white rounded-lg overflow-hidden shadow-lg">
                <thead>
                  <tr className="bg-gray-50">
                    <th className="p-4 text-left font-semibold text-gray-700">Period</th>
                    <th className="p-4 text-center font-semibold text-green-600">Your Investment (12% p.a.)</th>
                    <th className="p-4 text-center font-semibold text-blue-600">Bank Low (5% p.a.)</th>
                    <th className="p-4 text-center font-semibold text-blue-600">Bank High (6% p.a.)</th>
                    <th className="p-4 text-center font-semibold text-purple-600">Advantage</th>
                  </tr>
                </thead>
                <tbody>
                  {periods.map((period, index) => {
                    const investmentReturn = calculateReturns(depositAmount, investmentRate, period.months);
                    const bankReturnLow = calculateReturns(depositAmount, bankRateLow, period.months);
                    const bankReturnHigh = calculateReturns(depositAmount, bankRateHigh, period.months);
                    const advantage = investmentReturn - bankReturnHigh;
                    
                    return (
                      <tr key={period.months} className={index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
                        <td className="p-4 font-medium text-gray-700">{period.label}</td>
                        <td className="p-4 text-center">
                          <div className="font-bold text-green-600">{formatCurrency(investmentReturn)}</div>
                          <div className="text-sm text-gray-500">
                            Total: {formatCurrency(depositAmount + investmentReturn)}
                          </div>
                        </td>
                        <td className="p-4 text-center">
                          <div className="font-bold text-blue-600">{formatCurrency(bankReturnLow)}</div>
                          <div className="text-sm text-gray-500">
                            Total: {formatCurrency(depositAmount + bankReturnLow)}
                          </div>
                        </td>
                        <td className="p-4 text-center">
                          <div className="font-bold text-blue-600">{formatCurrency(bankReturnHigh)}</div>
                          <div className="text-sm text-gray-500">
                            Total: {formatCurrency(depositAmount + bankReturnHigh)}
                          </div>
                        </td>
                        <td className="p-4 text-center">
                          <div className="font-bold text-purple-600 flex items-center justify-center">
                            <TrendingUp className="w-4 h-4 mr-1" />
                            {formatCurrency(advantage)}
                          </div>
                        </td>
                      </tr>
                    );
                  })}
                </tbody>
              </table>
            </div>

            {/* Summary Cards */}
            <div className="grid md:grid-cols-3 gap-4 mt-8">
              <div className="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
                <TrendingUp className="w-8 h-8 text-green-600 mx-auto mb-2" />
                <h3 className="font-bold text-green-800 mb-1">12-Month Advantage</h3>
                <p className="text-2xl font-bold text-green-600">
                  {formatCurrency(calculateReturns(depositAmount, investmentRate, 12) - calculateReturns(depositAmount, bankRateHigh, 12))}
                </p>
                <p className="text-sm text-green-700 mt-1">Extra earnings vs. best bank rate</p>
              </div>
              
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-6 text-center">
                <Calculator className="w-8 h-8 text-blue-600 mx-auto mb-2" />
                <h3 className="font-bold text-blue-800 mb-1">Bank Rate Range</h3>
                <p className="text-2xl font-bold text-blue-600">5% - 6%</p>
                <p className="text-sm text-blue-700 mt-1">Annual percentage rate</p>
              </div>
              
              <div className="bg-purple-50 border border-purple-200 rounded-lg p-6 text-center">
                <TrendingUp className="w-8 h-8 text-purple-600 mx-auto mb-2" />
                <h3 className="font-bold text-purple-800 mb-1">Your Rate</h3>
                <p className="text-2xl font-bold text-purple-600">12%</p>
                <p className="text-sm text-purple-700 mt-1">Annual percentage rate</p>
              </div>
            </div>

            {/* Disclaimer */}
            <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6">
              <p className="text-sm text-yellow-800">
                <strong>Disclaimer:</strong> This calculator is for illustrative purposes only. Investment returns are not guaranteed and may vary. 
                Bank rates shown are typical ranges and may differ between institutions. Please consult with a financial advisor for personalized advice.
              </p>
            </div>
          </div>
        )}

        {depositAmount === 0 && (
          <div className="text-center py-12">
            <Calculator className="w-16 h-16 text-gray-300 mx-auto mb-4" />
            <p className="text-gray-500 text-lg">Enter a deposit amount to see your potential returns</p>
          </div>
        )}
      </div>
    </div>
  );
}
